# Trends single-month now shows Jan-to-selected-month (YTD)

- Number: 11
- Created: 2026-02-19T15:34:54.943062
- File: `11.md`

## Details

Updated Trends monthly behavior to show year-to-date months for single-month selection.

Requested behavior
- If selected month is March: show Jan, Feb, Mar
- If selected month is April: show Jan, Feb, Mar, Apr
- Continue until December

Implementation
- File: lib/viewmodels/customer_analytics_viewmodel.dart
- Updated `_buildMonthlyComparisonRange()`:
  - For single-month selected ranges, monthly comparison starts at January 1 of the selected year.
  - End remains selected month end.
  - Multi-month selected ranges keep their selected start month.

Test updates
- File: test/viewmodels/customer_analytics_viewmodel_test.dart
- Updated existing tests that previously assumed a "previous+selected month" model.
- Added new regression test:
  - `monthly breakdown for single-month selection includes Jan to selected month`
  - Verifies March selection returns Jan/Feb/Mar with zero-filled missing month.

Verification
- dart analyze lib/viewmodels/customer_analytics_viewmodel.dart test/viewmodels/customer_analytics_viewmodel_test.dart
- flutter test test/viewmodels/customer_analytics_viewmodel_test.dart
- All passed.
