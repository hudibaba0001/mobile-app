# Trends single-month comparison always includes previous month

- Number: 10
- Created: 2026-02-19T15:29:33.872752
- File: `10.md`

## Details

Adjusted Trends monthly comparison behavior per clarification: comparison belongs to Trends, not Overview.

Change made
- File: lib/viewmodels/customer_analytics_viewmodel.dart
- Updated `_buildMonthlyComparisonRange()`:
  - For any single-month selection, Trends monthly breakdown now includes previous month context.
  - This ensures previous month row is shown for month comparison in Trends even when selected range is a full single month.

Test updates
- File: test/viewmodels/customer_analytics_viewmodel_test.dart
- Updated existing Trends tests to assert month-specific buckets (by year/month) instead of assuming a single returned month.
- Kept invariant checks and boundary checks intact.

Validation
- dart analyze lib/viewmodels/customer_analytics_viewmodel.dart test/viewmodels/customer_analytics_viewmodel_test.dart
- flutter test test/viewmodels/customer_analytics_viewmodel_test.dart
- All passed.
