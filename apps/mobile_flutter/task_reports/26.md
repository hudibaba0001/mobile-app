# Fix Home Recent Entries Race (Dropped Refresh During In-Flight Load)

- Number: 26
- Created: 2026-02-20T01:55:31.821898
- File: `26.md`

## Details

Second fix for Home recent entries not loading.

Root cause found:
- Debounced recent-entry loader could drop updates while a load was in-flight.
- If provider updates happened during `_isLoadingRecent == true`, timer callback returned early and no follow-up load was guaranteed.

Fix implemented:
- File: lib/screens/unified_home_screen.dart
1) Added `_pendingRecentReload` flag.
2) In debounced callback:
   - If `_isLoadingRecent` is true, set `_pendingRecentReload = true` and return.
3) In `_loadRecentEntriesInternal()` finally block:
   - After load completes, if `_pendingRecentReload` is true, trigger one queued `_loadRecentEntries()` call.

This guarantees provider updates that arrive during a running recent-load are not lost.

Verification:
- flutter analyze lib/screens/unified_home_screen.dart => PASS
- flutter analyze => PASS
- flutter test test/widgets/flexsaldo_card_test.dart test/widgets/tracking_range_text_test.dart => PASS
- flutter test => PASS
