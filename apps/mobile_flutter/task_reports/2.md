# Trends Range + Boundary Fix

- Number: 2
- Created: 2026-02-19T14:40:44.051989
- File: `2.md`

## Details

Issue
- Trends tab numbers were still wrong compared with Overview/Home for the same selected period.
- Root cause was date-range wiring and boundary filtering behavior in the trends data source.

What I changed
1) Wired Reports selected range into Trends data source
- File: lib/screens/reports_screen.dart
- In ChangeNotifierProxyProvider update, I now call:
  - model.setDateRange(range.start, range.end)
- This ensures Trends uses the same selected period as Overview.

2) Fixed day-inclusive filtering in CustomerAnalyticsViewModel
- File: lib/viewmodels/customer_analytics_viewmodel.dart
- setDateRange now normalizes to date-only and exits early if unchanged.
- _getFilteredEntries now applies date-only inclusive filtering correctly.
- Uses TimeRange.custom(start, end) when both bounds are present so end day is fully included.
- Prevents same-day entries (after 00:00) from being incorrectly excluded.

Why this fixes the mismatch
- Previously, the end date was treated as midnight in comparisons, which excluded entries later that day.
- Trends also was not guaranteed to follow the Reports selected period.
- Now both are aligned to the selected date range with inclusive day semantics.

Validation
- dart analyze on changed files: no issues.
- flutter test test/reporting/tracked_time_calculator_test.dart: all tests passed.

Files changed
- lib/screens/reports_screen.dart
- lib/viewmodels/customer_analytics_viewmodel.dart
